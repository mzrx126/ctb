<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Quiz Game</title>
<script>
// 题库数据
const quizData = [

    {
        "source": "wknd1)",
        "question": "1. Are the __________(strawberry) sweet or sour?",
        "answer": "strawberries"
    },
    {
        "source": "wknd1)",
        "question": "2. A pair of glasses ____on the bed. It's my mother's. A. is B. are C. am",
        "answer": "A"
    },
    {
        "source": "wknd1)",
        "question": "3. I can't write with the pencil. It's not__________. A. sharp B. hard C. blunt",
        "answer": "A"
    },
    {
        "source": "wknd1)",
        "question": "4. Are insects color-blind? (negative answer)_____________",
        "answer": "No, they aren't."
    }
];

let totalAnswered = 0;
let correctAnswers = 0;
let incorrectAnswers = 0;
let remainingQuestions = [...quizData]; // 未回答或回答错误的题目

// 语音合成函数
function speak(text) {
    const speech = new SpeechSynthesisUtterance(text);
    const voices = window.speechSynthesis.getVoices();
    const femaleVoice = voices.find(voice => voice.name.includes('Google US English Female')) || voices.find(voice => voice.gender === 'female') || voices[0];
    speech.voice = femaleVoice;
    window.speechSynthesis.speak(speech);
}

// 提交答案的处理
function submitAnswer() {
    const userAnswer = document.getElementById('answer').value;
    const currentQuestion = remainingQuestions[0]; // 当前题目

    totalAnswered++;
    if (userAnswer === currentQuestion.answer) {
        correctAnswers++;
        speak("oh yes!"); // 正确时播放 "oh yes!"
        // 从剩余题目中移除
        remainingQuestions.shift();
    } else {
        incorrectAnswers++;
        speak("oh no!"); // 错误时播放 "oh no!"
    }
    updateStats();
    displayQuestion(); // 显示下一个问题
}

// 显示题目
function displayQuestion() {
    if (remainingQuestions.length === 0) {
        speak("Congratulations, you have completed the test!");
        return;
    }

    // 显示题目
    const currentQuestion = remainingQuestions[0];
    document.getElementById('question').textContent = currentQuestion.question;
    document.getElementById('answer').value = ''; // 清空答案输入框
}

// 更新统计数据
function updateStats() {
    const accuracy = (correctAnswers / totalAnswered * 100).toFixed(2);
    document.getElementById('totalAnswered').textContent = totalAnswered;
    document.getElementById('correctAnswers').textContent = correctAnswers;
    document.getElementById('incorrectAnswers').textContent = incorrectAnswers;
    document.getElementById('accuracy').textContent = accuracy + '%';
}

// 页面加载完成后初始化
window.onload = function() {
    document.getElementById('totalQuestions').textContent = quizData.length;
    displayQuestion();
    updateStats();

    // 监听回车键提交答案
    document.getElementById('answer').addEventListener('keypress', function(event) {
        if (event.keyCode === 13) { // 回车键的键码是13
            submitAnswer();
        }
    });

    // 点击提交按钮提交答案
    document.getElementById('submit').onclick = submitAnswer;
};
</script>
</head>
<body>
<h2>Quiz Game</h2>
<p>Total Questions: <span id="totalQuestions">0</span></p>
<p>Question: <span id="question"></span></p>
<input type="text" id="answer" placeholder="Enter your answer here">
<button id="submit">Submit Answer</button>
<h3>Stats</h3>
<p>Total Answered: <span id="totalAnswered">0</span></p>
<p>Correct Answers: <span id="correctAnswers">0</span></p>
<p>Incorrect Answers: <span id="incorrectAnswers">0</span></p>
<p>Accuracy: <span id="accuracy">0%</span></p>
</body>
</html>
